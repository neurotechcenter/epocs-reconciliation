
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
    "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
      xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
      xmlns:dc="http://purl.org/dc/elements/1.1/"
      xmlns:foaf="http://xmlns.com/foaf/0.1/">
  <head>
        <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
        <link rel="stylesheet" type="text/css" href="theme.css" />
      <title>
        Customizing EPOCS
      </title>
  </head>
  <body>
  <img src="logo.png" width="100%" />
<h1>Customizing EPOCS</h1>
<p>The online EPOCS application may be easily customized, without causing version-control conflicts, by specifying a custom BCI2000 script that is run once when BCI2000 is launched. Various examples of custom scripts are provided in the <code>app/custom</code> directory, but you can always add more scripts of your own.   A custom script is generally invoked by changing the "Target" line in the Properties dialog of the shortcut you use to launch EPOCS (this will either be a shortcut to <code>app/gui-bin/epocs.exe</code> or to <code>app/gui/epocs.bat</code>).  In the "Target" line, append a space followed by an argument such as <code>--custom=../custom/VisualizeSource.bat</code>.</p>
<p>Custom scripts might be used to add BCI2000 state variables, add BCI2000 parameters, or change parameter values.
Examples include:</p>
<ul>
<li>
<p><code>--custom=../custom/VisualizeSource.bat</code></p>
<p>This causes the BCI2000 source signal viewer to appear in the background (minimize the EPOCS window to see it). This is particularly useful for checking and troubleshooting any 50Hz/60Hz interference.</p>
</li>
<li>
<p><code>--custom=../custom/VisualizeTrapFilter.bat</code></p>
<p>Sometimes, the operator may wish to keep an eye on the evoked responses without allowing the subject to be distracted by them.  One solution is to spend a couple of thousand dollars on, and sacrifice some bench space for, an oscilloscope.  Another is to use this custom script in conjunction with an app like <a href="http://getidisplay.com/">iDisplay</a> to display each epoch on a smartphone or tablet screen.</p>
</li>
<li>
<p><code>--custom=../custom/treadmill.bat</code></p>
<p>This illustrates how to add extra channels to the recording system. Note that the first two channels should still be the EMG agonist and antagonist, and should always be called EMG1 and EMG2.  It's also easiest if the trigger channel remains in the third position.  In our lab, the extra "FOOT" channel was used to record the data from a digital foot contact sensor. (In this configuration, incidentally, we generally triggered nerve stimulation by hand at a certain phase of the gait cycle: so the acquisition board's trigger input channel was configured to receive pulses <em>from</em> the stimulator, but the trigger output channel was not configured to send commands <em>to</em> the stimulator.)</p>
</li>
<li>
<p><code>--custom=../custom/TriggerGateUDP.bat</code></p>
<p>This illustrates how another computer running BCI2000 can use the App Connector to gate whether EPOCS delivers a trigger.  More generally, the <code>TriggerExpression</code> parameter allows any BCI2000 expression to be used to veto EPOCS decision to issue a trigger pulse.</p>
</li>
</ul>
<p>It would be nice if this mechanism could also be used to customize the naming and output port configuration of the National Instruments card. However, as at 2014-07-31, this is not yet possible, for reasons detailed on the <a href="SignalProcessingFilters.html">SignalProcessingFilters</a> page.</p>
  </body>
</html>
