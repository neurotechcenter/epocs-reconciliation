###########################################################################
## $Id:  $
## Authors: Amir Eftekhar (a.eftekhar@gmail.com)
## Description: Build information for the aReflexConditioningSignalProcessing project
##              
##              
###########################################################################

IF( NOT WIN32 )
	RETURN()  # ever since NIDAQFilter became part of the signal-processing module, no hope of compiling on non-Windows
ENDIF( NOT WIN32 )

#ADD_SUBDIRECTORY( cmdline )

# Set the executable name
SET( EXECUTABLE_NAME aReflexConditioningSignalProcessing )

# Set the project specific sources
SET( SRC_PROJECT
  PipeDefinition.cpp        
  BackgroundTriggerFilter.cpp
  DS5ControlFilter.cpp
  TrapFilter.cpp
  RangeIntegrator.cpp
  stdafx.cpp
  NIDAQFilterAO.cpp
  ${BCI2000_SRC_DIR}/contrib/SignalSource/NIDAQ-MX/nidaq/NIDAQmx.imports.cpp
  SharedMemoryOutputConnector.cpp
)

SET( HDR_PROJECT
  BackgroundTriggerFilter.h
  TrapFilter.h
  RangeIntegrator.h
  NIDAQFilterAO.h
  DS5ControlFilter.h
  MixedCode.h
  stdafx.h
  targetver.h
  ${BCI2000_SRC_DIR}/contrib/SignalSource/NIDAQ-MX/nidaq/NIDAQmx.imports.h
  ${BCI2000_SRC_DIR}/contrib/SignalSource/NIDAQ-MX/nidaq/NIDAQmx.h
  SharedMemoryOutputConnector.h
)

IF( NOT WIN32 ) # TODO: remove this section when BCI2000 can build on OSX again
  ADD_DEFINITIONS( -DWORKAROUND4530 ) 
  SET( HDR_PROJECT
    ${HDR_PROJECT}
    Workaround4530.h
  )
ENDIF( NOT WIN32 )


INCLUDE_DIRECTORIES( ${BCI2000_SRC_DIR}/contrib/SignalSource/NIDAQ-MX/nidaq)
INCLUDE_DIRECTORIES( ${BCI2000_SRC_DIR}/Custom/aReflexConditioningSignalProcessing/Libraries)

IF( USE_DYNAMIC_IMPORTS )
ELSE()
  LINK_DIRECTORIES( ${BCI2000_SRC_DIR}/contrib/SignalSource/NIDAQ-MX/nidaq ${BCI2000_SRC_DIR}/Custom/aReflexConditioningSignalProcessing/Libraries)
ENDIF()

LIST( APPEND SRC_PROJECT ${BCI2000_SRC_DIR}/shared/modules/CoreMain.cpp )
BCI2000_ADD_SIGNAL_PROCESSING_MODULE( 
  "${EXECUTABLE_NAME}" 
  "${SRC_PROJECT}" "${HDR_PROJECT}" 
)

TARGET_LINK_LIBRARIES(aReflexConditioningSignalProcessing ${BCI2000_SRC_DIR}/Custom/aReflexConditioningSignalProcessing/Libraries/MixedCode.lib)


